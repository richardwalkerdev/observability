== node_exporter


[source%nowrap,bash]
----
useradd -m -s /bin/false node_exporter
----

Get the latest download link from https://prometheus.io/download/.

[source%nowrap,bash]
----
wget https://github.com/prometheus/node_exporter/releases/download/v1.0.1/node_exporter-1.0.1.linux-amd64.tar.gz
----

Extract the archive:

[source%nowrap,bash]
----
tar -xvf node_exporter-1.0.1.linux-amd64.tar.gz
----

Move into the extracted directory:

[source%nowrap,bash]
----
cd node_exporter-1.0.1.linux-amd64
----

Copy the `node_exporter` binary to a suitable path:

[source%nowrap,bash]
----
cp node_exporter /usr/local/bin/
----

Create a service for `node_exporter` using `systemd`, example includes a custom port `4100`:

[source%nowrap,bash]
----
vi /etc/systemd/system/node_exporter.service
----

[source%nowrap,bash]
----
[Unit]
Description=Prometheus Node Exporter
Wants=network-online.target
After=network-online.target

[Service]
User=node_exporter
Group=node_exporter
Type=simple
ExecStart=/usr/local/bin/node_exporter \
    --web.listen-address=:9100

[Install]
WantedBy=multi-user.target
----

Start and enable the Node Exporter:

[source%nowrap,bash]
----
systemctl daemon-reload
systemctl enable node_exporter --now
systemctl status node_exporter
----

Add Node Exporter to Prometheus scrape, include labe to identify individual nodes for example `pnode1` and `pnode2`:

[source%nowrap,bash]
----
vi /etc/prometheus/prometheus.yml
----

[source%nowrap,yaml]
----
scrape_configs:
  - job_name: 'prometheus'
    static_configs:
    - targets: ['0.0.0.0:9090']
  - job_name: 'node_exporter'
    static_configs:
    - targets: ['0.0.0.0:9100']
      labels:
        node: pnode1
----

[source%nowrap,yaml]
----
systemctl restart prometheus
----


// This is a comment and won't be rendered.
